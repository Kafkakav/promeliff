import{u as e,r as t,o as s,d as a,f as o,e as r,t as n,c as i,s as l,a as c,j as u}from"./BdFCZY2b.js";import{a as d}from"./fZjk1EK6.js";const p=d.create({headers:{Accept:"application/json","Content-Type":"application/json"},timeout:5e4});p.interceptors.request.use((e=>((e.headers||{}).isToken,e.headers["User-Agent"]="Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:122.0) Gecko/20100101 Firefox/122.0",e)),(e=>Promise.reject(e))),p.interceptors.response.use((function(e){if("blob"===e.request.responseType||"arraybuffer"===e.request.responseType)return e.data;const t=e.data.code||200;switch(t){case 400:case 401:return Promise.reject(`無法存取:${t}, status:${e.status}`);case 404:return Promise.reject("頁面不存在:404");case 500:return Promise.reject("內部發生錯誤")}return e.data}),(function(e){return e.response&&e.response.status,Promise.reject(e.response)}));const m={class:"container-fluid",style:{margin:"0",padding:"0"}},f={class:"d-flex flex-wrap justify-content-center gap-2 w-100",style:{padding:"20px"}},g={class:"card card-fixed-wd"},y={class:"card-img-top"},v=["src"],h={class:"card-body"},b={key:0,class:"list-group list-group-flush"},w={key:0,class:"list-group-item"},j={key:1,class:"list-group-item",style:{color:"red"}},x={class:"list-group-item"},k={class:"list-group-item"},P={class:"card-footer d-flex flex-wrap justify-content-center"},C={__name:"CheckIn",setup(d){const p=c();e();const C=t(!1),T=t({lat:25.03418,lng:121.564087}),q=t("https://maps.google.com/maps?q=25.034180679449104,121.56408708529044&output=embed"),$=t(""),z=t("");function B(){C.value=!1,$.value="資料獲取中...","geolocation"in navigator?navigator.geolocation.getCurrentPosition((e=>{const t=Math.round(1e6*e.coords.latitude)/1e6,s=Math.round(1e6*e.coords.longitude)/1e6;T.value={lat:t,lng:s},q.value=`https://maps.google.com/maps?q=${t},${s}&output=embed`,$.value=""}),(e=>{i(`無法取得位置資訊${e.code} ${e.message||""}`,{autoClose:4e3}),$.value="無法取得位置資訊"})):(i("您的瀏覽器不支援地理定位功能。",{autoClose:4e3}),$.value="您的瀏覽器不支援地理定位功能"),new Promise((async(e,t)=>{try{const t=await fetch("https://api.ipify.org?format=json");e((await t.json()).ip)}catch(s){t(s.message||s.code)}})).then((e=>{z.value=e})).catch((e=>{z.value="error"})).finally((()=>{C.value=!0}))}return s((async()=>{})),(e,t)=>(u(),a("div",m,[o("div",f,[o("div",g,[o("div",y,[q.value.length>5?(u(),a("iframe",{key:0,width:"100%",height:"240",style:{border:"0"},loading:"lazy",allowfullscreen:"",referrerpolicy:"no-referrer-when-downgrade",src:q.value},null,8,v)):r("",!0)]),o("div",h,[t[3]||(t[3]=o("h4",{class:"card-title"},"打卡資訊",-1)),C.value?(u(),a("ul",b,[0==$.value.length?(u(),a("li",w,"GPS: "+n(T.value.lat)+","+n(T.value.lng),1)):r("",!0),$.value.length>0?(u(),a("li",j,"GPS: "+n($.value),1)):r("",!0),o("li",x,"IP: "+n(z.value),1),o("li",k,[o("button",{type:"button",class:"btn btn-outline-primary fixed-size me-2",onClick:t[0]||(t[0]=e=>{window.Swal.fire({icon:"question",title:"送出打卡資訊",showDenyButton:!0,confirmButtonText:"確認",denyButtonText:"取消"}).then((e=>{e.isConfirmed||e.isDenied}))})},"送出")])])):r("",!0)]),o("div",P,[o("button",{type:"button",class:"btn btn-outline-primary fixed-size me-2",onClick:t[1]||(t[1]=e=>B())},"打卡"),o("button",{type:"button",class:"btn btn-outline-primary fixed-size me-2",onClick:t[2]||(t[2]=e=>{l((()=>{p.push({name:"Home"})}))})},"回首頁")])])])]))}};export{C as default};
