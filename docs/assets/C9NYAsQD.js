import{_ as e,r as l,L as a,m as s,o as t,d as n,f as o,n as c,z as u,C as i,D as r,e as d,q as m,t as b,F as p,B as v,M as f,j as g,N as C,O as y,P as h,c as k}from"./BpdCzYEz.js";import{u as x,B as w,s as E,c as G,a as D}from"./BQ22Wonc.js";import{B as S}from"./mvpjPU_N.js";const U={USD:{Cn:"美元",En:"United States Dollar",sign:"$"},TWD:{Cn:"台幣",En:"New Taiwan Dollar",sign:"NT"},JPY:{Cn:"日圓",En:"Japanese Yen",sign:"¥"},HKD:{Cn:"港幣",En:"Hong Kong Dollar",sign:"$"},CNY:{Cn:"人民幣",En:"Chinese Yuan",sign:"¥"},EUR:{Cn:"歐元",En:"Euro",sign:"€"},KRW:{Cn:"韓元",En:"South Korean Won",sign:"₩"},GBP:{Cn:"英鎊",En:"Pound Sterling",sign:"£"},THB:{Cn:"泰幣",En:"Thai Baht",sign:"฿"},AUD:{Cn:"澳幣",En:"Australian Dollar",sign:"$"},CAD:{Cn:"加幣",En:"Canadian Dollar",sign:"$"},PHP:{Cn:"菲律賓比索",En:"Philippine Peso",sign:"₱"},INR:{Cn:"印度盧比",En:"Indian",sign:"₹"},CHF:{Cn:"瑞士法郎",En:"Swiss Franc",sign:"CHF"},IDR:{Cn:"印尼幣",En:"Indonesian Rupiah",sign:"Rp"},MYR:{Cn:"馬來幣",En:"Malaysian Ringgit",sign:"RM"},NZD:{Cn:"紐元",En:"New Zealand Dollar",sign:"$"},SEK:{Cn:"瑞典幣",En:"Swedish Krona",sign:"kr"},SGD:{Cn:"新加坡幣",En:"Singapore Dollar",sign:"$"},VND:{Cn:"越南盾",En:"Vietnamese Dong",sign:"₫"},ZAR:{Cn:"南非幣",En:"South African Rand",sign:"R"}},R={class:"container-fluid px-0 text-center"},V={class:"d-flex flex-wrap justify-content-center",style:{margin:"20 0px"}},N={class:"col-12"},_={class:"card"},j={class:"card-body"},P={class:"row mb-3 py-3"},$={class:"text-start"},B={class:"mb-1"},H={class:"mb-1"},K={for:"currency",class:"form-label"},M={key:0},A=["id","value"],T=["for"],Y={class:"mb-1"},I={class:"row g-2"},W={class:"mb-1"},F={class:"mb-1"},J={for:"currency",class:"form-label"},L={key:0},Z=["id","value"],q=["for"],O={class:"mb-1"},z={class:"text-start"},Q={class:"list-group scrollable-list"},X=["value"],ee={class:"badge bg-ligh text-dark"},le={class:"badge bg-secondary"},ae=e({__name:"aaGroup",emits:["update-menuitem"],setup(e,{emit:ae}){const se=x(),te=l(U),ne=l([{label:"新增群組",active:!1,style:["btn-success","btn-outline-success"]},{label:"成員名單",active:!1,style:["btn-success","btn-outline-success"]},{label:"更新群組",active:!1,style:["btn-success","btn-outline-success"]}]),oe=l(null),ce=a({title:"",desc:"",currency:["TWD","USD","JPY","HKD","CNY","EUR","KRW","GBP","THB"]}),ue=s((()=>se.myGroupList?se.myGroupList:[])),ie=l([]),re=l(!1),de=l(-1),me=e=>{oe.value=e.selected,oe.value.index=e.index,ne.value=ne.value.map(((l,a)=>({...l,active:a===e.index}))),1==e.index&&Ce()},be=e=>{},pe=()=>{const e=se.selectedGroup;for(let l=0;l<ue.value.length;l++)if(ue.value[l].gid===e.gid){se.setSelectGroup(ue.value[l]);break}},ve=()=>{G(ce).then((e=>{window.Swal.fire({title:"新增成功",icon:"success"})})).catch((e=>{window.Swal.fire({title:"修改失敗",icon:"error",text:`${e.error||"error"}`})}))},fe=()=>{const e=se.selectedGroup;for(let l=0;l<ue.value.length;l++)if(ue.value[l].gid===e.gid){E(e.gid,e).then((e=>{ue.value[l]=e.data,window.Swal.fire({title:"修改成功",icon:"success"})})).catch((e=>{window.Swal.fire({title:"修改失敗",icon:"error",text:`${e.error||"error"}`})}));break}},ge=s((()=>Object.entries(te.value).map((([e,l])=>({code:e,...l})))));function Ce(){"string"==typeof se.defaultGroup.gid&&0!=se.defaultGroup.gid.length&&se.restfulMyGroupMembers(se.defaultGroup.gid).then((e=>{let l=e.map((e=>(e.checked=!1,e)));for(let a=0;a<40;a++)l.push({checked:!1,uid:`uidxx_${a}`,displayName:`fakeDemoUser_${a}`,role:""+(a%2==0?"member":"view"),status:""+(a%2==0?"join":"view")});ie.value=l})).catch((e=>{ie.value=[]}))}function ye(){if("string"!=typeof se.defaultGroup.gid||0==se.defaultGroup.gid.length)return void k("請先選擇群組",{autoClose:2e3});if(de.value<0||de.value>=ie.value.length)return void k("請先選擇成員",{autoClose:2e3});const e=[];e.push({uid:ie.value[de.value].uid,displayName:ie.value[de.value].displayName,role:"member"}),D(se.defaultGroup.gid,e).then((e=>{const l=e.data||null;l&&("ok"===l.status?k("成員加入成功",{autoClose:2e3}):k("成員加入失敗",{autoClose:2e3}),Ce())})).catch((e=>{Ce()}))}const he=ae;return t((()=>{se.restfulMyGroups().then((e=>{})).catch((e=>{})),he("update-menuitem",{page:"AAGroup"})})),(e,l)=>(g(),n("div",R,[o("div",V,[c(w,{title:"",buttons:ne.value,onSelect:me,onUpdateRequest:be},null,8,["buttons"]),o("div",N,[o("div",_,[l[19]||(l[19]=o("div",{class:"card-img-top"},null,-1)),o("div",j,[l[18]||(l[18]=o("h4",{class:"card-title text-center"},"我的群組",-1)),o("div",P,[o("form",$,[o("div",B,[l[14]||(l[14]=o("label",{for:"title",class:"form-label"},"群組名稱",-1)),u(o("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":l[0]||(l[0]=e=>r(se).defaultGroup.title=e)},null,512),[[i,r(se).defaultGroup.title]])]),o("div",H,[o("label",K,[l[15]||(l[15]=m("貨幣種類： ")),o("button",{class:"btn btn-outline-primary btn-sm mx-1",onClick:l[1]||(l[1]=e=>re.value=!re.value)},"貨幣列表"),l[16]||(l[16]=o("br",null,null,-1)),m(b(r(se).defaultGroup.currency),1)]),re.value?(g(),n("div",M,[(g(!0),n(p,null,v(ge.value,(e=>(g(),n("div",{class:"checkbox-item",key:e.code},[u(o("input",{class:"form-check-input",type:"checkbox",id:"idk_"+e.code,value:e.code,"onUpdate:modelValue":l[2]||(l[2]=e=>r(se).defaultGroup.currency=e)},null,8,A),[[C,r(se).defaultGroup.currency]]),o("label",{class:"form-check-label",for:"idk_"+e.code},b(e.code)+" "+b(e.Cn)+" "+b(e.sign),9,T)])))),128))])):d("",!0)]),o("div",Y,[l[17]||(l[17]=o("label",{for:"desc",class:"form-label"},"說明",-1)),u(o("textarea",{class:"form-control",id:"desc",rows:"3","onUpdate:modelValue":l[3]||(l[3]=e=>r(se).defaultGroup.desc=e)},null,512),[[i,r(se).defaultGroup.desc]])])]),o("p",null,[o("button",{class:"btn btn-success mx-1",onClick:pe},"重置"),o("button",{class:"btn btn-success mx-1",onClick:fe},"修改")])])])]),c(S,{modelValue:ne.value[0].active,"onUpdate:modelValue":l[9]||(l[9]=e=>ne.value[0].active=e)},{header:f((()=>l[20]||(l[20]=[o("div",{style:{"text-align":"center"}},"新增群組",-1)]))),content:f((()=>[o("div",null,[o("form",I,[o("div",W,[l[21]||(l[21]=o("label",{for:"title",class:"form-label"},"群組名稱",-1)),u(o("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":l[4]||(l[4]=e=>ce.title=e)},null,512),[[i,ce.title]])]),o("div",F,[o("label",J,[l[22]||(l[22]=m("貨幣種類：")),o("button",{class:"btn btn-outline-primary btn-sm mx-1",onClick:l[5]||(l[5]=e=>re.value=!re.value)},"貨幣列表"),l[23]||(l[23]=o("br",null,null,-1)),m(b(ce.currency),1)]),re.value?(g(),n("div",L,[(g(!0),n(p,null,v(ge.value,(e=>(g(),n("div",{class:"checkbox-item",key:e.code},[u(o("input",{class:"form-check-input",type:"checkbox",id:"idk_"+e.code,value:e.code,"onUpdate:modelValue":l[6]||(l[6]=e=>ce.currency=e)},null,8,Z),[[C,ce.currency]]),o("label",{class:"form-check-label",for:"idk_"+e.code},b(e.code)+" "+b(e.Cn)+" "+b(e.sign),9,q)])))),128))])):d("",!0)]),o("div",O,[l[24]||(l[24]=o("label",{for:"desc",class:"form-label"},"說明",-1)),u(o("textarea",{class:"form-control",id:"desc",rows:"3","onUpdate:modelValue":l[7]||(l[7]=e=>ce.desc=e)},null,512),[[i,ce.desc]])])])])])),footer:f((()=>[o("div",null,[o("button",{class:"btn btn-success mx-1",onClick:l[8]||(l[8]=e=>ne.value[0].active=!1)},"關閉"),o("button",{class:"btn btn-success mx-1",onClick:ve},"新增")])])),_:1},8,["modelValue"]),c(S,{modelValue:ne.value[1].active,"onUpdate:modelValue":l[13]||(l[13]=e=>ne.value[1].active=e)},{header:f((()=>l[25]||(l[25]=[o("div",null,"成員名單",-1)]))),content:f((()=>[o("form",z,[o("div",Q,[(g(!0),n(p,null,v(ie.value,((e,a)=>(g(),n("label",{class:"list-group-item",key:e.uid},[u(o("input",{class:"form-check-input me-1",type:"radio",name:"joinusMBR","onUpdate:modelValue":l[10]||(l[10]=e=>de.value=e),value:a},null,8,X),[[y,de.value]]),o("span",{class:h(["badge","join"==e.status?"bg-success":"bg-warning"])},b(e.status),3),o("span",ee,b(e.displayName),1),o("span",le,b(e.role),1)])))),128))])])])),footer:f((()=>[o("div",null,[o("button",{class:"btn btn-success mx-1",onClick:l[11]||(l[11]=e=>ne.value[1].active=!1)},"關閉"),o("button",{class:"btn btn-success mx-1",onClick:l[12]||(l[12]=e=>ne.value[1].active=!1)},"刪除"),o("button",{class:"btn btn-success mx-1",onClick:ye},"加入")])])),_:1},8,["modelValue"])])])]))}},[["__scopeId","data-v-74f79e1b"]]);export{ae as default};
