import{_ as e,L as t,m as a,o as l,d as s,j as u,e as o,f as i,t as n,z as r,A as c,F as p,B as d,r as v,b as m,n as g,M as f,p as y,a as h}from"./BpdCzYEz.js";import{u as b,B as G}from"./BQ22Wonc.js";import{B as x}from"./mvpjPU_N.js";const A={class:"button-menu-component"},k={key:0,class:"mb-4"},L={class:"btn-menu-container"},_={class:"btn-menu w-100"},j=["value"],M=e({__name:"aaMyGroupSelector",props:{title:{type:String,default:""},groups:{type:Array,required:!0,validator:e=>e.every((e=>"string"==typeof e.gid&&"string"==typeof e.title))}},emits:["select"],setup(e,{emit:v}){const m=b(),g=t({gid:"",title:""}),f=a((()=>m.myGroupList?m.myGroupList:[])),y=v,h=()=>{for(let e=0;e<f.value.length;e++)if(f.value[e].gid===g.gid){m.setSelectGroup(f.value[e]),G(g,e);break}},G=(e,t)=>{y("select",{selected:e,index:t})};return l((()=>{if(0==m.myGroupList.length&&m.restfulMyGroups().then((e=>{})).catch((e=>{})),m.defaultGroup){const e=m.defaultGroup;Object.keys(m.defaultGroup).forEach((t=>{g[t]=e[t]}))}})),(t,a)=>(u(),s("div",A,[e.title?(u(),s("h2",k,n(e.title),1)):o("",!0),i("div",L,[i("div",_,[r(i("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>g.gid=e),class:"form-select",style:{"max-width":"100%"},onChange:h},[a[1]||(a[1]=i("option",{value:"",disabled:""},"-- 群組列表 --",-1)),(u(!0),s(p,null,d(f.value,(e=>(u(),s("option",{key:e.gid,value:e.gid},n(e.title)+" @ "+n(e.createdAt),9,j)))),128))],544),[[c,g.gid]])])])]))}},[["__scopeId","data-v-2865d07a"]]),w={class:"container-fluid px-4 text-center"},S={class:"text-border"},U={class:"container-fluid px-0 text-center",style:{"max-width":"640px"}},B={class:"col-md-12"},C={class:"container-fluid px-0 text-center",style:{"max-width":"640px"}},V={__name:"aaHomeLayout",setup(e){const t=h(),l=b(),o=v({gid:"",title:""}),r=a((()=>l.myGroupList?l.myGroupList:[])),c=v([{label:"首頁",active:!1,page:"AAZHome"},{label:"新增消費",active:!1,page:"AABillItem"},{label:"群組",active:!1,page:"AAGroup"},{label:"成員",active:!1,page:"AAMember"},{label:"帳單統計",active:!1,page:"AACheckout"}]),p=v(null),d=v(!1),A=e=>{if(e&&e.page)for(let t=0;t<c.value.length;t++)c.value[t].page!==e.page?c.value[t].active=!1:c.value[t].active=!0},k=e=>{p.value=e.selected,p.value&&null!=p.value.page?t.push({name:p.value.page}):t.push({path:"/aazhi"}),c.value=c.value.map(((t,a)=>({...t,active:a===e.index})))},L=e=>{},_=e=>{if(l.defaultGroup){const e=l.defaultGroup;Object.keys(l.defaultGroup).forEach((t=>{o[t]=e[t]}))}};const j=a((()=>l.selectedGroup?l.selectedGroup.title:""));return m((async()=>{l.reloadStore(),l.restfulMyGroups().then((e=>{})).catch((e=>{})),l.selectedGroup?o.value=l.selectedGroup:o.value={title:""}})),(e,t)=>{const a=y("router-view");return u(),s("div",w,[t[4]||(t[4]=i("img",{src:"/promeliff/assets/DaT5UeLH.png",class:"card-img-top",style:{"max-width":"440px"},alt:"PROME Title"},null,-1)),t[5]||(t[5]=i("h2",null,null,-1)),i("h1",{class:"top-title",onClick:t[0]||(t[0]=e=>d.value=!d.value)},[i("span",S,n(j.value),1)]),g(G,{title:"",buttons:c.value,onSelect:k,onUpdateRequest:L},null,8,["buttons"]),g(x,{modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=e=>d.value=e)},{header:f((()=>t[3]||(t[3]=[i("div",{style:{"text-align":"center"}},"切換群組",-1)]))),content:f((()=>[i("div",U,[i("div",B,[g(M,{title:"",groups:r.value,onSelect:_},null,8,["groups"])])])])),footer:f((()=>[i("div",null,[i("button",{class:"btn btn-success mx-1",onClick:t[1]||(t[1]=e=>d.value=!1)},"關閉")])])),_:1},8,["modelValue"]),i("div",C,[g(a,{onUpdateMenuitem:A})])])}}};export{V as default};
