import{v as e,r as t,x as r,o as n,y as o,m as a,d as i,f as s,z as c,A as u,B as l,C as d,j as f,u as p,n as h,D as v,e as m,t as y,c as g,s as w,a as b}from"./Biz0ScVy.js";var C=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},$=(e,t,r)=>(C(e,t,"read from private field"),r?r.call(e):t.get(e));const T=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"]],S=[...T,["unknown"]].map((e=>e[0])),_=new Map(T);function P(e){for(const[t,r]of _)if(e===r)return t;return"unknown"}function E(e){try{return e instanceof HTMLImageElement}catch(t){return!1}}function O(e){try{return e instanceof SVGImageElement}catch(t){return!1}}function x(e){try{return e instanceof HTMLVideoElement}catch(t){return!1}}function M(e){try{return e instanceof HTMLCanvasElement}catch(t){return!1}}function A(e){try{return e instanceof ImageBitmap}catch(t){return!1}}function D(e){try{return e instanceof OffscreenCanvas}catch(t){return!1}}function j(e){try{return e instanceof VideoFrame}catch(t){return!1}}function k(e){try{return e instanceof Blob}catch(t){return!1}}async function R(e){if(E(e)&&!(await async function(e){try{return await e.decode(),!0}catch(t){return!1}}(e)))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(O(e)&&!(await async function(e){var t;try{return await(null==(t=e.decode)?void 0:t.call(e)),!0}catch(r){return!1}}(e)))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(j(e)&&function(e){return null===e.format}(e))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(x(e)&&(0===e.readyState||1===e.readyState))throw new DOMException("Invalid element or state.","InvalidStateError");if(A(e)&&function(e){return 0===e.width&&0===e.height}(e))throw new DOMException("The image source is detached.","InvalidStateError");const{width:t,height:r}=function(e){if(E(e))return{width:e.naturalWidth,height:e.naturalHeight};if(O(e))return{width:e.width.baseVal.value,height:e.height.baseVal.value};if(x(e))return{width:e.videoWidth,height:e.videoHeight};if(A(e))return{width:e.width,height:e.height};if(j(e))return{width:e.displayWidth,height:e.displayHeight};if(M(e))return{width:e.width,height:e.height};if(D(e))return{width:e.width,height:e.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}(e);if(0===t||0===r)return null;const n=function(e,t){try{const r=new OffscreenCanvas(e,t);if(r.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return r;throw void 0}catch(r){const o=document.createElement("canvas");return o.width=e,o.height=t,o}}(t,r).getContext("2d");n.drawImage(e,0,0);try{return n.getImageData(0,0,t,r)}catch(o){throw new DOMException("Source would taint origin.","SecurityError")}}async function F(e){if(k(e))return await async function(e){let t;try{if(globalThis.createImageBitmap)t=await createImageBitmap(e);else{if(!globalThis.Image)return e;{t=new Image;let r="";try{r=URL.createObjectURL(e),t.src=r,await t.decode()}finally{URL.revokeObjectURL(r)}}}}catch(r){throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}return await R(t)}(e);if(function(e){try{return e instanceof ImageData}catch(t){return!1}}(e)){if(function(e){return 0===e.data.buffer.byteLength}(e))throw new DOMException("The image data has been detached.","InvalidStateError");return e}return M(e)||D(e)?function(e){const{width:t,height:r}=e;if(0===t||0===r)return null;const n=e.getContext("2d");try{return n.getImageData(0,0,t,r)}catch(o){throw new DOMException("Source would taint origin.","SecurityError")}}(e):await R(e)}function W(e,t){return e instanceof DOMException?new DOMException(`${t}: ${e.message}`,e.name):e instanceof Error?new e.constructor(`${t}: ${e.message}`):new Error(`${t}: ${e}`)}const I=["Aztec","Codabar","Code128","Code39","Code93","DataBar","DataBarExpanded","DataMatrix","DXFilmEdge","EAN-13","EAN-8","ITF","Linear-Codes","Matrix-Codes","MaxiCode","MicroQRCode","None","PDF417","QRCode","rMQRCode","UPC-A","UPC-E"];function U(e){return e.join("|")}function L(e){const t=H(e);let r=0,n=I.length-1;for(;r<=n;){const e=Math.floor((r+n)/2),o=I[e],a=H(o);if(a===t)return o;a<t?r=e+1:n=e-1}return"None"}function H(e){return e.toLowerCase().replace(/_-\[\]/g,"")}function N(e,t){return e.Binarizer[t]}function B(e,t){return e.CharacterSet[t]}const V=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function z(e){return V[e.value]}function q(e,t){return e.EanAddOnSymbol[t]}function G(e,t){return e.TextMode[t]}const J={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!1,validateCode39CheckSum:!1,validateITFCheckSum:!1,returnCodabarStartEnd:!1,returnErrors:!1,eanAddOnSymbol:"Read",textMode:"Plain",characterSet:"Unknown"};function Y(e,t){return{...t,formats:U(t.formats),binarizer:N(e,t.binarizer),eanAddOnSymbol:q(e,t.eanAddOnSymbol),textMode:G(e,t.textMode),characterSet:B(e,t.characterSet)}}function Q(e){return{...e,format:L(e.format),eccLevel:e.eccLevel,contentType:z(e.contentType)}}const X={locateFile:(e,t)=>{const r=e.match(/_(.+?)\.wasm$/);return r?`https://fastly.jsdelivr.net/npm/zxing-wasm@1.1.3/dist/${r[1]}/${e}`:t+e}};let K=new WeakMap;function Z(e,t){var r;const n=K.get(e);if(null!=n&&n.modulePromise&&void 0===t)return n.modulePromise;const o=null!=(r=null==n?void 0:n.moduleOverrides)?r:X,a=e({...o});return K.set(e,{moduleOverrides:o,modulePromise:a}),a}var ee,te,re=(ee=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,function(e={}){var t,r,n=e;n.ready=new Promise(((e,n)=>{t=e,r=n}));var o=Object.assign({},n),a="./this.program",i="object"==typeof window,s="function"==typeof importScripts;"object"==typeof process&&"object"==typeof process.versions&&process.versions.node;var c,u="";(i||s)&&(s?u=self.location.href:typeof document<"u"&&document.currentScript&&(u=document.currentScript.src),ee&&(u=ee),u=0!==u.indexOf("blob:")?u.substr(0,u.replace(/[?#].*/,"").lastIndexOf("/")+1):"",s&&(c=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)})),n.print||console.log.bind(console);var l,d=n.printErr||console.error.bind(console);Object.assign(n,o),o=null,n.arguments&&n.arguments,n.thisProgram&&(a=n.thisProgram),n.quit&&n.quit,n.wasmBinary&&(l=n.wasmBinary),"object"!=typeof WebAssembly&&O("no native wasm support detected");var f,p,h,v,m,y,g,w,b,C=!1;function $(){var e=f.buffer;n.HEAP8=p=new Int8Array(e),n.HEAP16=v=new Int16Array(e),n.HEAPU8=h=new Uint8Array(e),n.HEAPU16=m=new Uint16Array(e),n.HEAP32=y=new Int32Array(e),n.HEAPU32=g=new Uint32Array(e),n.HEAPF32=w=new Float32Array(e),n.HEAPF64=b=new Float64Array(e)}var T=[],S=[],_=[],P=0,E=null;function O(e){var t;null===(t=n.onAbort)||void 0===t||t.call(n,e),d(e="Aborted("+e+")"),C=!0,e+=". Build with -sASSERTIONS for more info.";var o=new WebAssembly.RuntimeError(e);throw r(o),o}var x,M,A=e=>e.startsWith("data:application/octet-stream;base64,");function D(e){if(e==x&&l)return new Uint8Array(l);if(c)return c(e);throw"both async and sync fetching of the wasm failed"}function j(e,t,r){return function(e){return l||!i&&!s||"function"!=typeof fetch?Promise.resolve().then((()=>D(e))):fetch(e,{credentials:"same-origin"}).then((t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()})).catch((()=>D(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then((e=>e)).then(r,(e=>{d(`failed to asynchronously prepare wasm: ${e}`),O(e)}))}A(x="zxing_reader.wasm")||(M=x,x=n.locateFile?n.locateFile(M,u):u+M);var k=e=>{for(;e.length>0;)e.shift()(n)};n.noExitRuntime;var R=[],F=0,W=0;function I(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(e){g[this.ptr+4>>2]=e},this.get_type=function(){return g[this.ptr+4>>2]},this.set_destructor=function(e){g[this.ptr+8>>2]=e},this.get_destructor=function(){return g[this.ptr+8>>2]},this.set_caught=function(e){e=e?1:0,p[this.ptr+12|0]=e},this.get_caught=function(){return 0!=p[this.ptr+12|0]},this.set_rethrown=function(e){e=e?1:0,p[this.ptr+13|0]=e},this.get_rethrown=function(){return 0!=p[this.ptr+13|0]},this.init=function(e,t){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t)},this.set_adjusted_ptr=function(e){g[this.ptr+16>>2]=e},this.get_adjusted_ptr=function(){return g[this.ptr+16>>2]},this.get_exception_ptr=function(){if(jt(this.get_type()))return g[this.excPtr>>2];var e=this.get_adjusted_ptr();return 0!==e?e:this.excPtr}}var U=e=>{var t=W;if(!t)return Et(0),0;var r=new I(t);r.set_adjusted_ptr(t);var n=r.get_type();if(!n)return Et(0),t;for(var o in e){var a=e[o];if(0===a||a===n)break;var i=r.ptr+16;if(Dt(a,n,i))return Et(a),t}return Et(n),t},L={},H=e=>{for(;e.length;){var t=e.pop();e.pop()(t)}};function N(e){return this.fromWireType(y[e>>2])}var B,V,z,q={},G={},J={},Y=e=>{throw new B(e)},Q=(e,t,r)=>{function n(t){var n=r(t);n.length!==e.length&&Y("Mismatched type converter count");for(var o=0;o<e.length;++o)Z(e[o],n[o])}e.forEach((function(e){J[e]=t}));var o=new Array(t.length),a=[],i=0;t.forEach(((e,t)=>{G.hasOwnProperty(e)?o[t]=G[e]:(a.push(e),q.hasOwnProperty(e)||(q[e]=[]),q[e].push((()=>{o[t]=G[e],++i===a.length&&n(o)})))})),0===a.length&&n(o)},X=e=>{for(var t="",r=e;h[r];)t+=V[h[r++]];return t},K=e=>{throw new z(e)};function Z(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");return function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n=t.name;if(e||K(`type "${n}" must have a positive integer typeid pointer`),G.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;K(`Cannot register type '${n}' twice`)}if(G[e]=t,delete J[e],q.hasOwnProperty(e)){var o=q[e];delete q[e],o.forEach((e=>e()))}}(e,t,r)}var te,re=8,ne=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),oe=e=>{K(e.$$.ptrType.registeredClass.name+" instance already deleted")},ae=!1,ie=e=>{},se=e=>{e.count.value-=1,0===e.count.value&&(e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)})(e)},ce=(e,t,r)=>{if(t===r)return e;if(void 0===r.baseClass)return null;var n=ce(e,t,r.baseClass);return null===n?null:r.downcast(n)},ue={},le=()=>Object.keys(ve).length,de=()=>{var e=[];for(var t in ve)ve.hasOwnProperty(t)&&e.push(ve[t]);return e},fe=[],pe=()=>{for(;fe.length;){var e=fe.pop();e.$$.deleteScheduled=!1,e.delete()}},he=e=>{te=e,fe.length&&te&&te(pe)},ve={},me=(e,t)=>(t=((e,t)=>{for(void 0===t&&K("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t})(e,t),ve[t]),ye=(e,t)=>((!t.ptrType||!t.ptr)&&Y("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&Y("Both smartPtrType and smartPtr must be specified"),t.count={value:1},we(Object.create(e,{$$:{value:t,writable:!0}})));function ge(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=me(this.registeredClass,t);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var n=r.clone();return this.destructor(e),n}function o(){return this.isSmartPointer?ye(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):ye(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var a,i=this.registeredClass.getActualType(t),s=ue[i];if(!s)return o.call(this);a=this.isConst?s.constPointerType:s.pointerType;var c=ce(t,this.registeredClass,a.registeredClass);return null===c?o.call(this):this.isSmartPointer?ye(a.registeredClass.instancePrototype,{ptrType:a,ptr:c,smartPtrType:this,smartPtr:e}):ye(a.registeredClass.instancePrototype,{ptrType:a,ptr:c})}var we=e=>typeof FinalizationRegistry>"u"?(we=e=>e,e):(ae=new FinalizationRegistry((e=>{se(e.$$)})),ie=e=>ae.unregister(e),(we=e=>{var t=e.$$;if(t.smartPtr){var r={$$:t};ae.register(e,r,e)}return e})(e));function be(){}var Ce=(e,t)=>Object.defineProperty(t,"name",{value:e}),$e=(e,t,r)=>{if(void 0===e[t].overloadTable){var n=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||K(`Function '${r}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}},Te=(e,t,r)=>{n.hasOwnProperty(e)?((void 0===r||void 0!==n[e].overloadTable&&void 0!==n[e].overloadTable[r])&&K(`Cannot register public name '${e}' twice`),$e(n,e,e),n.hasOwnProperty(r)&&K(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),n[e].overloadTable[r]=t):(n[e]=t,void 0!==r&&(n[e].numArguments=r))};function Se(e,t,r,n,o,a,i,s){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=o,this.getActualType=a,this.upcast=i,this.downcast=s,this.pureVirtualFunctions=[]}var _e=(e,t,r)=>{for(;t!==r;)t.upcast||K(`Expected null or instance of ${r.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function Pe(e,t){if(null===t)return this.isReference&&K(`null is not a valid ${this.name}`),0;t.$$||K(`Cannot pass "${Qe(t)}" as a ${this.name}`),t.$$.ptr||K(`Cannot pass deleted object as a pointer of type ${this.name}`);var r=t.$$.ptrType.registeredClass;return _e(t.$$.ptr,r,this.registeredClass)}function Ee(e,t){var r;if(null===t)return this.isReference&&K(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,r),r):0;(!t||!t.$$)&&K(`Cannot pass "${Qe(t)}" as a ${this.name}`),t.$$.ptr||K(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&K(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var n=t.$$.ptrType.registeredClass;if(r=_e(t.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&K("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:K(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var o=t.clone();r=this.rawShare(r,Ge.toHandle((()=>o.delete()))),null!==e&&e.push(this.rawDestructor,r)}break;default:K("Unsupporting sharing policy")}return r}function Oe(e,t){if(null===t)return this.isReference&&K(`null is not a valid ${this.name}`),0;t.$$||K(`Cannot pass "${Qe(t)}" as a ${this.name}`),t.$$.ptr||K(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&K(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var r=t.$$.ptrType.registeredClass;return _e(t.$$.ptr,r,this.registeredClass)}function xe(e){return this.fromWireType(g[e>>2])}function Me(e,t,r,n,o,a,i,s,c,u,l){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=n,this.isSmartPointer=o,this.pointeeType=a,this.sharingPolicy=i,this.rawGetPointee=s,this.rawConstructor=c,this.rawShare=u,this.rawDestructor=l,o||void 0!==t.baseClass?this.toWireType=Ee:n?(this.toWireType=Pe,this.destructorFunction=null):(this.toWireType=Oe,this.destructorFunction=null)}var Ae,De,je=(e,t,r)=>{n.hasOwnProperty(e)||Y("Replacing nonexistant public symbol"),void 0!==n[e].overloadTable&&void 0!==r?n[e].overloadTable[r]=t:(n[e]=t,n[e].argCount=r)},ke=[],Re=e=>{var t=ke[e];return t||(e>=ke.length&&(ke.length=e+1),ke[e]=t=Ae.get(e)),t},Fe=(e,t,r)=>e.includes("j")?((e,t,r)=>{var o=n["dynCall_"+e];return r&&r.length?o.apply(null,[t].concat(r)):o.call(null,t)})(e,t,r):Re(t).apply(null,r),We=(e,t)=>{var r=(e=X(e)).includes("j")?((e,t)=>{var r=[];return function(){return r.length=0,Object.assign(r,arguments),Fe(e,t,r)}})(e,t):Re(t);return"function"!=typeof r&&K(`unknown function pointer with signature ${e}: ${t}`),r},Ie=e=>{var t=_t(e),r=X(t);return Tt(t),r},Ue=(e,t)=>{var r=[],n={};throw t.forEach((function e(t){if(!n[t]&&!G[t]){if(J[t])return void J[t].forEach(e);r.push(t),n[t]=!0}})),new De(`${e}: `+r.map(Ie).join([", "]))},Le=(e,t)=>{for(var r=[],n=0;n<e;n++)r.push(g[t+4*n>>2]);return r};function He(e,t,r,n,o,a){var i=t.length;i<2&&K("argTypes array size mismatch! Must at least get return value and 'this' types!");var s=null!==t[1]&&null!==r,c=function(e){for(var t=1;t<e.length;++t)if(null!==e[t]&&void 0===e[t].destructorFunction)return!0;return!1}(t),u="void"!==t[0].name,l=i-2,d=new Array(l),f=[],p=[];return Ce(e,(function(){var r;arguments.length!==l&&K(`function ${e} called with ${arguments.length} arguments, expected ${l}`),p.length=0,f.length=s?2:1,f[0]=o,s&&(r=t[1].toWireType(p,this),f[1]=r);for(var a=0;a<l;++a)d[a]=t[a+2].toWireType(p,arguments[a]),f.push(d[a]);return function(e){if(c)H(p);else for(var n=s?1:2;n<t.length;n++){var o=1===n?r:d[n-2];null!==t[n].destructorFunction&&t[n].destructorFunction(o)}if(u)return t[0].fromWireType(e)}(n.apply(null,f))}))}var Ne=e=>{const t=(e=e.trim()).indexOf("(");return-1!==t?e.substr(0,t):e};function Be(){this.allocated=[void 0],this.freelist=[]}var Ve=new Be,ze=e=>{e>=Ve.reserved&&0==--Ve.get(e).refcount&&Ve.free(e)},qe=()=>{for(var e=0,t=Ve.reserved;t<Ve.allocated.length;++t)void 0!==Ve.allocated[t]&&++e;return e},Ge={toValue:e=>(e||K("Cannot use deleted val. handle = "+e),Ve.get(e).value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return Ve.allocate({refcount:1,value:e})}}},Je=(e,t,r)=>{switch(t){case 1:return r?function(e){return this.fromWireType(p[0|e])}:function(e){return this.fromWireType(h[0|e])};case 2:return r?function(e){return this.fromWireType(v[e>>1])}:function(e){return this.fromWireType(m[e>>1])};case 4:return r?function(e){return this.fromWireType(y[e>>2])}:function(e){return this.fromWireType(g[e>>2])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},Ye=(e,t)=>{var r=G[e];return void 0===r&&K(t+" has unknown type "+Ie(e)),r},Qe=e=>{if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e},Xe=(e,t)=>{switch(t){case 4:return function(e){return this.fromWireType(w[e>>2])};case 8:return function(e){return this.fromWireType(b[e>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},Ke=(e,t,r)=>{switch(t){case 1:return r?e=>p[0|e]:e=>h[0|e];case 2:return r?e=>v[e>>1]:e=>m[e>>1];case 4:return r?e=>y[e>>2]:e=>g[e>>2];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},Ze=(e,t,r,n)=>{if(!(n>0))return 0;for(var o=r,a=r+n-1,i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i)),s<=127){if(r>=a)break;t[r++]=s}else if(s<=2047){if(r+1>=a)break;t[r++]=192|s>>6,t[r++]=128|63&s}else if(s<=65535){if(r+2>=a)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|63&s}else{if(r+3>=a)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|63&s}}return t[r]=0,r-o},et=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++r):t+=3}return t},tt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,rt=(e,t)=>e?((e,t,r)=>{for(var n=t+r,o=t;e[o]&&!(o>=n);)++o;if(o-t>16&&e.buffer&&tt)return tt.decode(e.subarray(t,o));for(var a="";t<o;){var i=e[t++];if(128&i){var s=63&e[t++];if(192!=(224&i)){var c=63&e[t++];if((i=224==(240&i)?(15&i)<<12|s<<6|c:(7&i)<<18|s<<12|c<<6|63&e[t++])<65536)a+=String.fromCharCode(i);else{var u=i-65536;a+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else a+=String.fromCharCode((31&i)<<6|s)}else a+=String.fromCharCode(i)}return a})(h,e,t):"",nt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,ot=(e,t)=>{for(var r=e,n=r>>1,o=n+t/2;!(n>=o)&&m[n];)++n;if((r=n<<1)-e>32&&nt)return nt.decode(h.subarray(e,r));for(var a="",i=0;!(i>=t/2);++i){var s=v[e+2*i>>1];if(0==s)break;a+=String.fromCharCode(s)}return a},at=(e,t,r)=>{var n;if(null!==(n=r)&&void 0!==n||(r=2147483647),r<2)return 0;for(var o=t,a=(r-=2)<2*e.length?r/2:e.length,i=0;i<a;++i){var s=e.charCodeAt(i);v[t>>1]=s,t+=2}return v[t>>1]=0,t-o},it=e=>2*e.length,st=(e,t)=>{for(var r=0,n="";!(r>=t/4);){var o=y[e+4*r>>2];if(0==o)break;if(++r,o>=65536){var a=o-65536;n+=String.fromCharCode(55296|a>>10,56320|1023&a)}else n+=String.fromCharCode(o)}return n},ct=(e,t,r)=>{var n;if(null!==(n=r)&&void 0!==n||(r=2147483647),r<4)return 0;for(var o=t,a=o+r-4,i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i)),y[t>>2]=s,(t+=4)+4>a)break}return y[t>>2]=0,t-o},ut=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&++r,t+=4}return t},lt=[],dt={},ft=()=>{if("object"==typeof globalThis)return globalThis;function e(e){e.$$$embind_global$$$=e;var t="object"==typeof $$$embind_global$$$&&e.$$$embind_global$$$==e;return t||delete e.$$$embind_global$$$,t}if("object"==typeof $$$embind_global$$$||("object"==typeof global&&e(global)?$$$embind_global$$$=global:"object"==typeof self&&e(self)&&($$$embind_global$$$=self),"object"==typeof $$$embind_global$$$))return $$$embind_global$$$;throw Error("unable to get global object.")},pt=Reflect.construct,ht=e=>{var t=(e-f.buffer.byteLength+65535)/65536;try{return f.grow(t),$(),1}catch(r){}},vt={},mt=()=>{if(!mt.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:a||"./this.program"};for(var t in vt)void 0===vt[t]?delete e[t]:e[t]=vt[t];var r=[];for(var t in e)r.push(`${t}=${e[t]}`);mt.strings=r}return mt.strings},yt=e=>e%4==0&&(e%100!=0||e%400==0),gt=[31,29,31,30,31,30,31,31,30,31,30,31],wt=[31,28,31,30,31,30,31,31,30,31,30,31],bt=(e,t,r,n)=>{var o=g[n+40>>2],a={tm_sec:y[n>>2],tm_min:y[n+4>>2],tm_hour:y[n+8>>2],tm_mday:y[n+12>>2],tm_mon:y[n+16>>2],tm_year:y[n+20>>2],tm_wday:y[n+24>>2],tm_yday:y[n+28>>2],tm_isdst:y[n+32>>2],tm_gmtoff:y[n+36>>2],tm_zone:o?rt(o):""},i=rt(r),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var c in s)i=i.replace(new RegExp(c,"g"),s[c]);var u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["January","February","March","April","May","June","July","August","September","October","November","December"];function d(e,t,r){for(var n="number"==typeof e?e.toString():e||"";n.length<t;)n=r[0]+n;return n}function f(e,t){return d(e,t,"0")}function h(e,t){function r(e){return e<0?-1:e>0?1:0}var n;return 0===(n=r(e.getFullYear()-t.getFullYear()))&&0===(n=r(e.getMonth()-t.getMonth()))&&(n=r(e.getDate()-t.getDate())),n}function v(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function m(e){var t=((e,t)=>{for(var r=new Date(e.getTime());t>0;){var n=yt(r.getFullYear()),o=r.getMonth(),a=(n?gt:wt)[o];if(!(t>a-r.getDate()))return r.setDate(r.getDate()+t),r;t-=a-r.getDate()+1,r.setDate(1),o<11?r.setMonth(o+1):(r.setMonth(0),r.setFullYear(r.getFullYear()+1))}return r})(new Date(e.tm_year+1900,0,1),e.tm_yday),r=new Date(t.getFullYear(),0,4),n=new Date(t.getFullYear()+1,0,4),o=v(r),a=v(n);return h(o,t)<=0?h(a,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var w={"%a":e=>u[e.tm_wday].substring(0,3),"%A":e=>u[e.tm_wday],"%b":e=>l[e.tm_mon].substring(0,3),"%B":e=>l[e.tm_mon],"%C":e=>f((e.tm_year+1900)/100|0,2),"%d":e=>f(e.tm_mday,2),"%e":e=>d(e.tm_mday,2," "),"%g":e=>m(e).toString().substring(2),"%G":e=>m(e),"%H":e=>f(e.tm_hour,2),"%I":e=>{var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),f(t,2)},"%j":e=>f(e.tm_mday+((e,t)=>{for(var r=0,n=0;n<=t;r+=e[n++]);return r})(yt(e.tm_year+1900)?gt:wt,e.tm_mon-1),3),"%m":e=>f(e.tm_mon+1,2),"%M":e=>f(e.tm_min,2),"%n":()=>"\n","%p":e=>e.tm_hour>=0&&e.tm_hour<12?"AM":"PM","%S":e=>f(e.tm_sec,2),"%t":()=>"\t","%u":e=>e.tm_wday||7,"%U":e=>{var t=e.tm_yday+7-e.tm_wday;return f(Math.floor(t/7),2)},"%V":e=>{var t=Math.floor((e.tm_yday+7-(e.tm_wday+6)%7)/7);if((e.tm_wday+371-e.tm_yday-2)%7<=2&&t++,t){if(53==t){var r=(e.tm_wday+371-e.tm_yday)%7;4!=r&&(3!=r||!yt(e.tm_year))&&(t=1)}}else{t=52;var n=(e.tm_wday+7-e.tm_yday-1)%7;(4==n||5==n&&yt(e.tm_year%400-1))&&t++}return f(t,2)},"%w":e=>e.tm_wday,"%W":e=>{var t=e.tm_yday+7-(e.tm_wday+6)%7;return f(Math.floor(t/7),2)},"%y":e=>(e.tm_year+1900).toString().substring(2),"%Y":e=>e.tm_year+1900,"%z":e=>{var t=e.tm_gmtoff;return(t>=0?"+":"-")+("0000"+(t=(t=Math.abs(t)/60)/60*100+t%60)).slice(-4)},"%Z":e=>e.tm_zone,"%%":()=>"%"};for(var c in i=i.replace(/%%/g,"\0\0"),w)i.includes(c)&&(i=i.replace(new RegExp(c,"g"),w[c](a)));var b=function(e){var t=et(e)+1,r=new Array(t);return Ze(e,r,0,r.length),r}(i=i.replace(/\0\0/g,"%"));return b.length>t?0:(((e,t)=>{p.set(e,t)})(b,e),b.length-1)};B=n.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},(()=>{for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);V=e})(),z=n.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},Object.assign(be.prototype,{isAliasOf(e){if(!(this instanceof be&&e instanceof be))return!1;var t=this.$$.ptrType.registeredClass,r=this.$$.ptr;e.$$=e.$$;for(var n=e.$$.ptrType.registeredClass,o=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;n.baseClass;)o=n.upcast(o),n=n.baseClass;return t===n&&r===o},clone(){if(this.$$.ptr||oe(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=we(Object.create(Object.getPrototypeOf(this),{$$:{value:ne(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||oe(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&K("Object already scheduled for deletion"),ie(this),se(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||oe(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&K("Object already scheduled for deletion"),fe.push(this),1===fe.length&&te&&te(pe),this.$$.deleteScheduled=!0,this}}),n.getInheritedInstanceCount=le,n.getLiveInheritedInstances=de,n.flushPendingDeletes=pe,n.setDelayFunction=he,Object.assign(Me.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){var t;null===(t=this.rawDestructor)||void 0===t||t.call(this,e)},argPackAdvance:re,readValueFromPointer:xe,deleteObject(e){null!==e&&e.delete()},fromWireType:ge}),De=n.UnboundTypeError=((e,t)=>{var r=Ce(t,(function(e){this.name=t,this.message=e;var r=new Error(e).stack;void 0!==r&&(this.stack=this.toString()+"\n"+r.replace(/^Error(:[^\n]*)?\n/,""))}));return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:`${this.name}: ${this.message}`},r})(Error,"UnboundTypeError"),Object.assign(Be.prototype,{get(e){return this.allocated[e]},has(e){return void 0!==this.allocated[e]},allocate(e){var t=this.freelist.pop()||this.allocated.length;return this.allocated[t]=e,t},free(e){this.allocated[e]=void 0,this.freelist.push(e)}}),Ve.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),Ve.reserved=Ve.allocated.length,n.count_emval_handles=qe;var Ct={s:e=>{var t=new I(e);return t.get_caught()||(t.set_caught(!0),F--),t.set_rethrown(!1),R.push(t),At(t.excPtr),t.get_exception_ptr()},u:()=>{Pt(0,0);var e=R.pop();Mt(e.excPtr),W=0},b:()=>U([]),g:e=>U([e]),q:(e,t)=>U([e,t]),J:()=>{var e=R.pop();e||O("no exception to throw");var t=e.excPtr;throw e.get_rethrown()||(R.push(e),e.set_rethrown(!0),e.set_caught(!1),F++),W=t},f:(e,t,r)=>{throw new I(e).init(t,r),F++,W=e},V:()=>F,d:e=>{throw W||(W=e),W},da:e=>{var t=L[e];delete L[e];var r=t.rawConstructor,n=t.rawDestructor,o=t.fields,a=o.map((e=>e.getterReturnType)).concat(o.map((e=>e.setterArgumentType)));Q([e],a,(e=>{var a={};return o.forEach(((t,r)=>{var n=t.fieldName,i=e[r],s=t.getter,c=t.getterContext,u=e[r+o.length],l=t.setter,d=t.setterContext;a[n]={read:e=>i.fromWireType(s(c,e)),write:(e,t)=>{var r=[];l(d,e,u.toWireType(r,t)),H(r)}}})),[{name:t.name,fromWireType:e=>{var t={};for(var r in a)t[r]=a[r].read(e);return n(e),t},toWireType:(e,t)=>{for(var o in a)if(!(o in t))throw new TypeError(`Missing field: "${o}"`);var i=r();for(o in a)a[o].write(i,t[o]);return null!==e&&e.push(n,i),i},argPackAdvance:re,readValueFromPointer:N,destructorFunction:n}]}))},Q:(e,t,r,n,o)=>{},_:(e,t,r,n)=>{Z(e,{name:t=X(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:n},argPackAdvance:re,readValueFromPointer:function(e){return this.fromWireType(h[e])},destructorFunction:null})},ca:(e,t,r,n,o,a,i,s,c,u,l,d,f)=>{l=X(l),a=We(o,a),s&&(s=We(i,s)),u&&(u=We(c,u)),f=We(d,f);var p=(e=>{if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=48&&t<=57?`_${e}`:e})(l);Te(p,(function(){Ue(`Cannot construct ${l} due to unbound types`,[n])})),Q([e,t,r],n?[n]:[],(function(t){var r,o;t=t[0],o=n?(r=t.registeredClass).instancePrototype:be.prototype;var i=Ce(l,(function(){if(Object.getPrototypeOf(this)!==c)throw new z("Use 'new' to construct "+l);if(void 0===v.constructor_body)throw new z(l+" has no accessible constructor");var e=v.constructor_body[arguments.length];if(void 0===e)throw new z(`Tried to invoke ctor of ${l} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(v.constructor_body).toString()}) parameters instead!`);return e.apply(this,arguments)})),c=Object.create(o,{constructor:{value:i}});i.prototype=c;var d,h,v=new Se(l,i,c,f,r,a,s,u);v.baseClass&&(null!==(h=(d=v.baseClass).__derivedClasses)&&void 0!==h||(d.__derivedClasses=[]),v.baseClass.__derivedClasses.push(v));var m=new Me(l,v,!0,!1,!1),y=new Me(l+"*",v,!1,!1,!1),g=new Me(l+" const*",v,!1,!0,!1);return ue[e]={pointerType:y,constPointerType:g},je(p,i),[m,y,g]}))},ba:(e,t,r,n,o,a)=>{var i=Le(t,r);o=We(n,o),Q([],[e],(function(e){var r=`constructor ${(e=e[0]).name}`;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new z(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${e.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return e.registeredClass.constructor_body[t-1]=()=>{Ue(`Cannot construct ${e.name} due to unbound types`,i)},Q([],i,(n=>(n.splice(1,0,null),e.registeredClass.constructor_body[t-1]=He(r,n,null,o,a),[]))),[]}))},w:(e,t,r,n,o,a,i,s,c)=>{var u=Le(r,n);t=X(t),t=Ne(t),a=We(o,a),Q([],[e],(function(e){var n=`${(e=e[0]).name}.${t}`;function o(){Ue(`Cannot call ${n} due to unbound types`,u)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),s&&e.registeredClass.pureVirtualFunctions.push(t);var c=e.registeredClass.instancePrototype,l=c[t];return void 0===l||void 0===l.overloadTable&&l.className!==e.name&&l.argCount===r-2?(o.argCount=r-2,o.className=e.name,c[t]=o):($e(c,t,n),c[t].overloadTable[r-2]=o),Q([],u,(function(o){var s=He(n,o,e,a,i);return void 0===c[t].overloadTable?(s.argCount=r-2,c[t]=s):c[t].overloadTable[r-2]=s,[]})),[]}))},Y:(e,t)=>{Z(e,{name:t=X(t),fromWireType:e=>{var t=Ge.toValue(e);return ze(e),t},toWireType:(e,t)=>Ge.toHandle(t),argPackAdvance:re,readValueFromPointer:N,destructorFunction:null})},x:(e,t,r,n)=>{function o(){}t=X(t),o.values={},Z(e,{name:t,constructor:o,fromWireType:function(e){return this.constructor.values[e]},toWireType:(e,t)=>t.value,argPackAdvance:re,readValueFromPointer:Je(t,r,n),destructorFunction:null}),Te(t,o)},h:(e,t,r)=>{var n=Ye(e,"enum");t=X(t);var o=n.constructor,a=Object.create(n.constructor.prototype,{value:{value:r},constructor:{value:Ce(`${n.name}_${t}`,(function(){}))}});o.values[r]=a,o[t]=a},L:(e,t,r)=>{Z(e,{name:t=X(t),fromWireType:e=>e,toWireType:(e,t)=>t,argPackAdvance:re,readValueFromPointer:Xe(t,r),destructorFunction:null})},M:(e,t,r,n,o,a,i)=>{var s=Le(t,r);e=X(e),e=Ne(e),o=We(n,o),Te(e,(function(){Ue(`Cannot call ${e} due to unbound types`,s)}),t-1),Q([],s,(function(r){var n=[r[0],null].concat(r.slice(1));return je(e,He(e,n,null,o,a),t-1),[]}))},t:(e,t,r,n,o)=>{t=X(t);var a=e=>e;if(0===n){var i=32-8*r;a=e=>e<<i>>>i}var s=t.includes("unsigned");Z(e,{name:t,fromWireType:a,toWireType:s?function(e,t){return this.name,t>>>0}:function(e,t){return this.name,t},argPackAdvance:re,readValueFromPointer:Ke(t,r,0!==n),destructorFunction:null})},o:(e,t,r)=>{var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function o(e){var t=g[e>>2],r=g[e+4>>2];return new n(p.buffer,r,t)}Z(e,{name:r=X(r),fromWireType:o,argPackAdvance:re,readValueFromPointer:o},{ignoreDuplicateRegistrations:!0})},K:(e,t)=>{var r="std::string"===(t=X(t));Z(e,{name:t,fromWireType(e){var t,n=g[e>>2],o=e+4;if(r)for(var a=o,i=0;i<=n;++i){var s=o+i;if(i==n||0==h[s]){var c=rt(a,s-a);void 0===t?t=c:(t+="\0",t+=c),a=s+1}}else{var u=new Array(n);for(i=0;i<n;++i)u[i]=String.fromCharCode(h[o+i]);t=u.join("")}return Tt(e),t},toWireType(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var n,o="string"==typeof t;o||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||K("Cannot pass non-string to std::string"),n=r&&o?et(t):t.length;var a=St(4+n+1),i=a+4;if(g[a>>2]=n,r&&o)((e,t,r)=>{Ze(e,h,t,r)})(t,i,n+1);else if(o)for(var s=0;s<n;++s){var c=t.charCodeAt(s);c>255&&(Tt(i),K("String has UTF-16 code units that do not fit in 8 bits")),h[i+s]=c}else for(s=0;s<n;++s)h[i+s]=t[s];return null!==e&&e.push(Tt,a),a},argPackAdvance:re,readValueFromPointer:xe,destructorFunction(e){Tt(e)}})},C:(e,t,r)=>{var n,o,a,i,s;r=X(r),2===t?(n=ot,o=at,i=it,a=()=>m,s=1):4===t&&(n=st,o=ct,i=ut,a=()=>g,s=2),Z(e,{name:r,fromWireType:e=>{for(var r,o=g[e>>2],i=a(),c=e+4,u=0;u<=o;++u){var l=e+4+u*t;if(u==o||0==i[l>>s]){var d=n(c,l-c);void 0===r?r=d:(r+="\0",r+=d),c=l+t}}return Tt(e),r},toWireType:(e,n)=>{"string"!=typeof n&&K(`Cannot pass non-string to C++ string type ${r}`);var a=i(n),c=St(4+a+t);return g[c>>2]=a>>s,o(n,c+4,a+t),null!==e&&e.push(Tt,c),c},argPackAdvance:re,readValueFromPointer:N,destructorFunction(e){Tt(e)}})},A:(e,t,r,n,o,a)=>{L[e]={name:X(t),rawConstructor:We(r,n),rawDestructor:We(o,a),fields:[]}},ea:(e,t,r,n,o,a,i,s,c,u)=>{L[e].fields.push({fieldName:X(t),getterReturnType:r,getter:We(n,o),getterContext:a,setterArgumentType:i,setter:We(s,c),setterContext:u})},$:(e,t)=>{Z(e,{isVoid:!0,name:t=X(t),argPackAdvance:0,fromWireType:()=>{},toWireType:(e,t)=>{}})},R:(e,t,r,n)=>(e=lt[e])(null,t=Ge.toValue(t),r,n),ha:ze,fa:e=>0===e?Ge.toHandle(ft()):(e=(e=>{var t=dt[e];return void 0===t?X(e):t})(e),Ge.toHandle(ft()[e])),Z:(e,t,r)=>{var n=((e,t)=>{for(var r=new Array(e),n=0;n<e;++n)r[n]=Ye(g[t+4*n>>2],"parameter "+n);return r})(e,t),o=n.shift();e--;var a=new Array(e),i=`methodCaller<(${n.map((e=>e.name)).join(", ")}) => ${o.name}>`;return(e=>{var t=lt.length;return lt.push(e),t})(Ce(i,((t,i,s,c)=>{for(var u=0,l=0;l<e;++l)a[l]=n[l].readValueFromPointer(c+u),u+=n[l].argPackAdvance;var d=1===r?pt(i,a):i.apply(t,a);for(l=0;l<e;++l){var f,p;null===(f=(p=n[l]).deleteObject)||void 0===f||f.call(p,a[l])}return((e,t,r)=>{var n=[],o=e.toWireType(n,r);return n.length&&(g[t>>2]=Ge.toHandle(n)),o})(o,s,d)})))},N:e=>{e>4&&(Ve.get(e).refcount+=1)},O:e=>{var t=Ge.toValue(e);H(t),ze(e)},aa:(e,t)=>{var r=(e=Ye(e,"_emval_take_value")).readValueFromPointer(t);return Ge.toHandle(r)},B:()=>{O("")},X:(e,t,r)=>h.copyWithin(e,t,t+r),W:e=>{var t,r,n=h.length,o=2147483648;if((e>>>=0)>o)return!1;for(var a=1;a<=4;a*=2){var i=n*(1+.2/a);i=Math.min(i,e+100663296);var s=Math.min(o,(t=Math.max(e,i))+((r=65536)-t%r)%r);if(ht(s))return!0}return!1},T:(e,t)=>{var r=0;return mt().forEach(((n,o)=>{var a=t+r;g[e+4*o>>2]=a,((e,t)=>{for(var r=0;r<e.length;++r)p[0|t++]=e.charCodeAt(r);p[0|t]=0})(n,a),r+=n.length+1})),0},U:(e,t)=>{var r=mt();g[e>>2]=r.length;var n=0;return r.forEach((e=>n+=e.length+1)),g[t>>2]=n,0},E:function(e,t,r,n){var o=Ot();try{return Re(e)(t,r,n)}catch(a){if(xt(o),a!==a+0)throw a;Pt(1,0)}},D:function(e,t,r,n,o){var a=Ot();try{return Re(e)(t,r,n,o)}catch(i){if(xt(a),i!==i+0)throw i;Pt(1,0)}},F:function(e,t,r,n){var o=Ot();try{return Re(e)(t,r,n)}catch(a){if(xt(o),a!==a+0)throw a;Pt(1,0)}},n:function(e){var t=Ot();try{return Re(e)()}catch(r){if(xt(t),r!==r+0)throw r;Pt(1,0)}},a:function(e,t){var r=Ot();try{return Re(e)(t)}catch(n){if(xt(r),n!==n+0)throw n;Pt(1,0)}},e:function(e,t,r){var n=Ot();try{return Re(e)(t,r)}catch(o){if(xt(n),o!==o+0)throw o;Pt(1,0)}},m:function(e,t,r,n){var o=Ot();try{return Re(e)(t,r,n)}catch(a){if(xt(o),a!==a+0)throw a;Pt(1,0)}},k:function(e,t,r,n,o){var a=Ot();try{return Re(e)(t,r,n,o)}catch(i){if(xt(a),i!==i+0)throw i;Pt(1,0)}},H:function(e,t,r,n,o,a){var i=Ot();try{return Re(e)(t,r,n,o,a)}catch(s){if(xt(i),s!==s+0)throw s;Pt(1,0)}},v:function(e,t,r,n,o,a,i){var s=Ot();try{return Re(e)(t,r,n,o,a,i)}catch(c){if(xt(s),c!==c+0)throw c;Pt(1,0)}},G:function(e,t,r,n,o,a,i,s){var c=Ot();try{return Re(e)(t,r,n,o,a,i,s)}catch(u){if(xt(c),u!==u+0)throw u;Pt(1,0)}},z:function(e,t,r,n,o,a,i,s,c,u,l,d){var f=Ot();try{return Re(e)(t,r,n,o,a,i,s,c,u,l,d)}catch(p){if(xt(f),p!==p+0)throw p;Pt(1,0)}},P:function(e,t,r,n,o){var a=Ot();try{return Rt(e,t,r,n,o)}catch(i){if(xt(a),i!==i+0)throw i;Pt(1,0)}},l:function(e){var t=Ot();try{Re(e)()}catch(r){if(xt(t),r!==r+0)throw r;Pt(1,0)}},j:function(e,t){var r=Ot();try{Re(e)(t)}catch(n){if(xt(r),n!==n+0)throw n;Pt(1,0)}},c:function(e,t,r){var n=Ot();try{Re(e)(t,r)}catch(o){if(xt(n),o!==o+0)throw o;Pt(1,0)}},p:function(e,t,r,n){var o=Ot();try{Re(e)(t,r,n)}catch(a){if(xt(o),a!==a+0)throw a;Pt(1,0)}},I:function(e,t,r,n,o){var a=Ot();try{Re(e)(t,r,n,o)}catch(i){if(xt(a),i!==i+0)throw i;Pt(1,0)}},r:function(e,t,r,n,o,a,i,s){var c=Ot();try{Re(e)(t,r,n,o,a,i,s)}catch(u){if(xt(c),u!==u+0)throw u;Pt(1,0)}},i:function(e,t,r,n,o,a,i,s,c,u,l){var d=Ot();try{Re(e)(t,r,n,o,a,i,s,c,u,l)}catch(f){if(xt(d),f!==f+0)throw f;Pt(1,0)}},y:function(e,t,r,n,o,a,i,s,c,u,l,d,f,p,h,v){var m=Ot();try{Re(e)(t,r,n,o,a,i,s,c,u,l,d,f,p,h,v)}catch(y){if(xt(m),y!==y+0)throw y;Pt(1,0)}},ga:e=>e,S:(e,t,r,n,o)=>bt(e,t,r,n)},$t=function(){var e={a:Ct};function t(e,t){return $t=e.exports,f=$t.ia,$(),Ae=$t.ma,function(e){S.unshift(e)}($t.ja),function(){var e;if(P--,null===(e=n.monitorRunDependencies)||void 0===e||e.call(n,P),0==P&&E){var t=E;E=null,t()}}(),$t}if(function(){var e;P++,null===(e=n.monitorRunDependencies)||void 0===e||e.call(n,P)}(),n.instantiateWasm)try{return n.instantiateWasm(e,t)}catch(o){d(`Module.instantiateWasm callback failed with error: ${o}`),r(o)}return function(e,t,r,n){return e||"function"!=typeof WebAssembly.instantiateStreaming||A(t)||"function"!=typeof fetch?j(t,r,n):fetch(t,{credentials:"same-origin"}).then((e=>WebAssembly.instantiateStreaming(e,r).then(n,(function(e){return d(`wasm streaming compile failed: ${e}`),d("falling back to ArrayBuffer instantiation"),j(t,r,n)}))))}(l,x,e,(function(e){t(e.instance)})).catch(r),{}}(),Tt=n._free=e=>(Tt=n._free=$t.ka)(e),St=n._malloc=e=>(St=n._malloc=$t.la)(e),_t=e=>(_t=$t.na)(e),Pt=(e,t)=>(Pt=$t.oa)(e,t),Et=e=>(Et=$t.pa)(e),Ot=()=>(Ot=$t.qa)(),xt=e=>(xt=$t.ra)(e),Mt=e=>(Mt=$t.sa)(e),At=e=>(At=$t.ta)(e),Dt=(e,t,r)=>(Dt=$t.ua)(e,t,r),jt=e=>(jt=$t.va)(e);n.dynCall_viijii=(e,t,r,o,a,i,s)=>(n.dynCall_viijii=$t.wa)(e,t,r,o,a,i,s);var kt,Rt=n.dynCall_jiiii=(e,t,r,o,a)=>(Rt=n.dynCall_jiiii=$t.xa)(e,t,r,o,a);function Ft(){function e(){kt||(kt=!0,n.calledRun=!0,!C&&(k(S),t(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),function(){if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)e=n.postRun.shift(),_.unshift(e);var e;k(_)}()))}P>0||(function(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)e=n.preRun.shift(),T.unshift(e);var e;k(T)}(),P>0)||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1),e()}),1)):e())}if(n.dynCall_iiiiij=(e,t,r,o,a,i,s)=>(n.dynCall_iiiiij=$t.ya)(e,t,r,o,a,i,s),n.dynCall_iiiiijj=(e,t,r,o,a,i,s,c,u)=>(n.dynCall_iiiiijj=$t.za)(e,t,r,o,a,i,s,c,u),n.dynCall_iiiiiijj=(e,t,r,o,a,i,s,c,u,l)=>(n.dynCall_iiiiiijj=$t.Aa)(e,t,r,o,a,i,s,c,u,l),E=function e(){kt||Ft(),kt||(E=e)},n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Ft(),e.ready});async function ne(e,t){return async function(e,t,r=J){const n={...J,...r},o=await Z(e),{size:a}=t,i=new Uint8Array(await t.arrayBuffer()),s=o._malloc(a);o.HEAPU8.set(i,s);const c=o.readBarcodesFromImage(s,a,Y(o,n));o._free(s);const u=[];for(let l=0;l<c.size();++l)u.push(Q(c.get(l)));return u}(re,e,t)}async function oe(e,t){return async function(e,t,r=J){const n={...J,...r},o=await Z(e),{data:a,width:i,height:s,data:{byteLength:c}}=t,u=o._malloc(c);o.HEAPU8.set(a,u);const l=o.readBarcodesFromPixmap(u,i,s,Y(o,n));o._free(u);const d=[];for(let f=0;f<l.size();++f)d.push(Q(l.get(f)));return d}(re,e,t)}class ae extends EventTarget{constructor(e={}){var t;super(),((e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)})(this,te,void 0);try{const r=null==(t=null==e?void 0:e.formats)?void 0:t.filter((e=>"unknown"!==e));if(0===(null==r?void 0:r.length))throw new TypeError("Hint option provided, but is empty.");null==r||r.forEach((e=>{if(!_.has(e))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${e}' is not a valid enum value of type BarcodeFormat.`)})),((e,t,r)=>{C(e,t,"write to private field"),t.set(e,r)})(this,te,null!=r?r:[]),function(e){return Z(re,e)}().then((e=>{this.dispatchEvent(new CustomEvent("load",{detail:e}))})).catch((e=>{this.dispatchEvent(new CustomEvent("error",{detail:e}))}))}catch(r){throw W(r,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return S.filter((e=>"unknown"!==e))}async detect(e){try{const r=await F(e);if(null===r)return[];let n;try{n=k(r)?await ne(r,{tryHarder:!0,formats:$(this,te).map((e=>_.get(e)))}):await oe(r,{tryHarder:!0,formats:$(this,te).map((e=>_.get(e)))})}catch(t){throw console.error(t),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return n.map((e=>{const{topLeft:{x:t,y:r},topRight:{x:n,y:o},bottomLeft:{x:a,y:i},bottomRight:{x:s,y:c}}=e.position,u=Math.min(t,n,a,s),l=Math.min(r,o,i,c),d=Math.max(t,n,a,s),f=Math.max(r,o,i,c);return{boundingBox:new DOMRectReadOnly(u,l,d-u,f-l),rawValue:e.text,format:P(e.format),cornerPoints:[{x:t,y:r},{x:n,y:o},{x:s,y:c},{x:a,y:i}]}}))}catch(r){throw W(r,"Failed to execute 'detect' on 'BarcodeDetector'")}}}te=new WeakMap;const ie=(e,t,r="error")=>{let n,o;const a=new Promise(((a,i)=>{n=a,o=i,e.addEventListener(t,n),e.addEventListener(r,o)}));return a.finally((()=>{e.removeEventListener(t,n),e.removeEventListener(r,o)})),a},se=e=>new Promise((t=>setTimeout(t,e)));class ce extends Error{constructor(){super("this browser has no Stream API support"),this.name="StreamApiNotSupportedError"}}class ue extends Error{constructor(){super("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP."),this.name="InsecureContextError"}}class le extends Error{constructor(){super("Loading camera stream timed out after 6 seconds. If you are on iOS in PWA mode, this is a known issue (see https://github.com/gruhn/vue-qrcode-reader/issues/298)"),this.name="StreamLoadTimeoutError"}}function de(e,t){if(!1===e)throw new Error(null!=t?t:"assertion failure")}function fe(e){throw new Error("this code should be unreachable")}let pe;async function he(e){if(void 0===window.BarcodeDetector)return console.debug("[vue-qrcode-reader] Native BarcodeDetector not supported. Will use polyfill."),new ae({formats:e});const t=await window.BarcodeDetector.getSupportedFormats(),r=e.filter((e=>!t.includes(e)));return r.length>0?(console.debug(`[vue-qrcode-reader] Native BarcodeDetector does not support formats ${JSON.stringify(r)}. Will use polyfill.`),new ae({formats:e})):navigator.platform.toUpperCase().includes("MAC")&&e.includes("pdf417")?(console.debug("[vue-qrcode-reader] Native BarcodeDetector is buggy for PDF417 codes on MacOS. Will use polyfill."),new ae({formats:e})):(console.debug("[vue-qrcode-reader] Will use native BarcodeDetector."),new window.BarcodeDetector({formats:e}))}async function ve(e){pe=await he(e)}var me={},ye={};Object.defineProperty(ye,"__esModule",{value:!0}),ye.compactObject=function e(t){return Te(t)?Object.keys(t).reduce((function(r,n){var o=Te(t[n]),a=o?e(t[n]):t[n],i=o&&!Object.keys(a).length;return void 0===a||i?r:Object.assign(r,function(e,t,r){return t=function(e){var t=function(e,t){if("object"!==we(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==we(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===we(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},n,a))}),{}):t},ye.deprecated=function(e,t){Ce&&console.warn(e+" is deprecated, please use "+t+" instead.")};var ge=ye.detectBrowser=function(e){var t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;var r=e.navigator;if(r.mozGetUserMedia)t.browser="firefox",t.version=$e(r.userAgent,/Firefox\/(\d+)\./,1);else if(r.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=$e(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!r.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=$e(r.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t};function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}ye.disableLog=function(e){return"boolean"!=typeof e?new Error("Argument type: "+we(e)+". Please use a boolean."):(be=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},ye.disableWarnings=function(e){return"boolean"!=typeof e?new Error("Argument type: "+we(e)+". Please use a boolean."):(Ce=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},ye.extractVersion=$e,ye.filterStats=function(e,t,r){var n=r?"outbound-rtp":"inbound-rtp",o=new Map;if(null===t)return o;var a=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&a.push(e)})),a.forEach((function(t){e.forEach((function(r){r.type===n&&r.trackId===t.id&&Se(e,r,o)}))})),o},ye.log=function(){if("object"===(typeof window>"u"?"undefined":we(window))){if(be)return;typeof console<"u"&&"function"==typeof console.log&&console.log.apply(console,arguments)}},ye.walkStats=Se,ye.wrapPeerConnectionEvent=function(e,t,r){if(e.RTCPeerConnection){var n=e.RTCPeerConnection.prototype,o=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return o.apply(this,arguments);var a=function(e){var t=r(e);t&&(n.handleEvent?n.handleEvent(t):n(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(n,a),o.apply(this,[e,a])};var a=n.removeEventListener;n.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[t])return a.apply(this,arguments);if(!this._eventMap[t].has(r))return a.apply(this,arguments);var n=this._eventMap[t].get(r);return this._eventMap[t].delete(r),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,a.apply(this,[e,n])},Object.defineProperty(n,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}};var be=!0,Ce=!0;function $e(e,t,r){var n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10)}function Te(e){return"[object Object]"===Object.prototype.toString.call(e)}function Se(e,t,r){!t||r.has(t.id)||(r.set(t.id,t),Object.keys(t).forEach((function(n){n.endsWith("Id")?Se(e,e.get(t[n]),r):n.endsWith("Ids")&&t[n].forEach((function(t){Se(e,e.get(t),r)}))})))}Object.defineProperty(me,"__esModule",{value:!0});var _e=me.shimGetUserMedia=function(e,t){var r=e&&e.navigator;if(r.mediaDevices){var n=function(e){if("object"!==Oe(e)||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(r){if("require"!==r&&"advanced"!==r&&"mediaSource"!==r){var n="object"===Oe(e[r])?e[r]:{ideal:e[r]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];var a={};"number"==typeof n.ideal?(a[o("min",r)]=n.ideal,t.optional.push(a),(a={})[o("max",r)]=n.ideal,t.optional.push(a)):(a[o("",r)]=n.ideal,t.optional.push(a))}void 0!==n.exact&&"number"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",r)]=n.exact):["min","max"].forEach((function(e){void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,r)]=n[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},o=function(e,o){if(t.version>=61)return o(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===Oe(e.audio)){var a=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])};a((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),a(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=n(e.audio)}if(e&&"object"===Oe(e.video)){var i=e.video.facingMode;i=i&&("object"===Oe(i)?i:{ideal:i});var s,c=t.version<66;if(i&&("user"===i.exact||"environment"===i.exact||"user"===i.ideal||"environment"===i.ideal)&&(!r.mediaDevices.getSupportedConstraints||!r.mediaDevices.getSupportedConstraints().facingMode||c))if(delete e.video.facingMode,"environment"===i.exact||"environment"===i.ideal?s=["back","rear"]:("user"===i.exact||"user"===i.ideal)&&(s=["front"]),s)return r.mediaDevices.enumerateDevices().then((function(t){var r=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return s.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!r&&t.length&&s.includes("back")&&(r=t[t.length-1]),r&&(e.video.deviceId=i.exact?{exact:r.deviceId}:{ideal:r.deviceId}),e.video=n(e.video),xe("chrome: "+JSON.stringify(e)),o(e)}));e.video=n(e.video)}return xe("chrome: "+JSON.stringify(e)),o(e)},a=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(r.getUserMedia=function(e,t,n){o(e,(function(e){r.webkitGetUserMedia(e,t,(function(e){n&&n(a(e))}))}))}.bind(r),r.mediaDevices.getUserMedia){var i=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(e){return o(e,(function(e){return i(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(a(e))}))}))}}}},Pe=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==Oe(e)&&"function"!=typeof e)return{default:e};var r=Ee(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(ye);function Ee(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(Ee=function(e){return e?r:t})(e)}function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var xe=Pe.log;var Me={};Object.defineProperty(Me,"__esModule",{value:!0});var Ae=Me.shimGetUserMedia=function(e,t){var r=e&&e.navigator,n=e&&e.MediaStreamTrack;if(r.getUserMedia=function(e,t,n){De.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(e).then(t,n)},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){var o=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])},a=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(e){return"object"===ke(e)&&"object"===ke(e.audio)&&(e=JSON.parse(JSON.stringify(e)),o(e.audio,"autoGainControl","mozAutoGainControl"),o(e.audio,"noiseSuppression","mozNoiseSuppression")),a(e)},n&&n.prototype.getSettings){var i=n.prototype.getSettings;n.prototype.getSettings=function(){var e=i.apply(this,arguments);return o(e,"mozAutoGainControl","autoGainControl"),o(e,"mozNoiseSuppression","noiseSuppression"),e}}if(n&&n.prototype.applyConstraints){var s=n.prototype.applyConstraints;n.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===ke(e)&&(e=JSON.parse(JSON.stringify(e)),o(e,"autoGainControl","mozAutoGainControl"),o(e,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[e])}}}},De=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==ke(e)&&"function"!=typeof e)return{default:e};var r=je(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(ye);function je(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(je=function(e){return e?r:t})(e)}function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Re={};Object.defineProperty(Re,"__esModule",{value:!0}),Re.shimAudioContext=function(e){"object"!==Ue(e)||e.AudioContext||(e.AudioContext=e.webkitAudioContext)},Re.shimCallbacksAPI=function(e){if("object"===Ue(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,o=t.setLocalDescription,a=t.setRemoteDescription,i=t.addIceCandidate;t.createOffer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],o=r.apply(this,[n]);return t?(o.then(e,t),Promise.resolve()):o},t.createAnswer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],o=n.apply(this,[r]);return t?(o.then(e,t),Promise.resolve()):o};var s=function(e,t,r){var n=o.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n};t.setLocalDescription=s,s=function(e,t,r){var n=a.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.setRemoteDescription=s,s=function(e,t,r){var n=i.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.addIceCandidate=s}},Re.shimConstraints=Le,Re.shimCreateOfferLegacy=function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){typeof e.offerToReceiveAudio<"u"&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var r=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0===e.offerToReceiveAudio&&!r&&this.addTransceiver("audio",{direction:"recvonly"}),typeof e.offerToReceiveVideo<"u"&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var n=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0===e.offerToReceiveVideo&&!n&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}};var Fe=Re.shimGetUserMedia=function(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var r=t.mediaDevices,n=r.getUserMedia.bind(r);t.mediaDevices.getUserMedia=function(e){return n(Le(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,n){t.mediaDevices.getUserMedia(e).then(r,n)}.bind(t))};Re.shimLocalStreamsAPI=function(e){if("object"===Ue(e)&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(n){return t.call(r,n,e)})),e.getVideoTracks().forEach((function(n){return t.call(r,n,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var r=this,n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return o&&o.forEach((function(e){r._localStreams?r._localStreams.includes(e)||r._localStreams.push(e):r._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var r=this._localStreams.indexOf(e);if(-1!==r){this._localStreams.splice(r,1);var n=e.getTracks();this.getSenders().forEach((function(e){n.includes(e.track)&&t.removeTrack(e)}))}})}},Re.shimRTCIceServerUrls=function(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,r){if(e&&e.iceServers){for(var n=[],o=0;o<e.iceServers.length;o++){var a=e.iceServers[o];void 0===a.urls&&a.url?(We.deprecated("RTCIceServer.url","RTCIceServer.urls"),(a=JSON.parse(JSON.stringify(a))).urls=a.url,delete a.url,n.push(a)):n.push(e.iceServers[o])}e.iceServers=n}return new t(e,r)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}},Re.shimRemoteStreamsAPI=function(e){if("object"===Ue(e)&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var r=new Event("addstream");r.stream=e,t.dispatchEvent(r)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var r=new Event("addstream");r.stream=t,e.dispatchEvent(r)}}))}),t.apply(e,arguments)}}},Re.shimTrackEventTransceiver=function(e){"object"===Ue(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})};var We=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==Ue(e)&&"function"!=typeof e)return{default:e};var r=Ie(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(ye);function Ie(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(Ie=function(e){return e?r:t})(e)}function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e){return e&&void 0!==e.video?Object.assign({},e,{video:We.compactObject(e.video)}):e}const He=(e=>{let t,r=!1;return(...n)=>(r||(t=e(n),r=!0),t)})((()=>{const e=ge(window);switch(e.browser){case"chrome":_e(window,e);break;case"firefox":Ae(window,e);break;case"safari":Fe(window,e);break;default:throw new ce}}));let Ne=Promise.resolve({type:"stop",data:{}});async function Be(e,t,r){var n,o,a;if(console.debug("[vue-qrcode-reader] starting camera with constraints: ",JSON.stringify(t)),!0!==window.isSecureContext)throw new ue;if(void 0===(null==(n=null==navigator?void 0:navigator.mediaDevices)?void 0:n.getUserMedia))throw new ce;He(),console.debug("[vue-qrcode-reader] calling getUserMedia");const i=await navigator.mediaDevices.getUserMedia({audio:!1,video:t});void 0!==e.srcObject?e.srcObject=i:void 0!==e.mozSrcObject?e.mozSrcObject=i:window.URL.createObjectURL?e.src=window.URL.createObjectURL(i):window.webkitURL?e.src=window.webkitURL.createObjectURL(i):e.src=i.id,e.play(),console.debug("[vue-qrcode-reader] waiting for video element to load"),await Promise.race([ie(e,"loadeddata"),se(6e3).then((()=>{throw new le}))]),console.debug("[vue-qrcode-reader] video element loaded"),await se(500);const[s]=i.getVideoTracks(),c=null!=(a=null==(o=null==s?void 0:s.getCapabilities)?void 0:o.call(s))?a:{};let u=!1;return r&&c.torch&&(await s.applyConstraints({advanced:[{torch:!0}]}),u=!0),console.debug("[vue-qrcode-reader] camera ready"),{type:"start",data:{videoEl:e,stream:i,capabilities:c,constraints:t,isTorchOn:u}}}async function Ve(e,t,r){console.debug("[vue-qrcode-reader] stopping camera"),e.src="",e.srcObject=null,e.load(),await ie(e,"error");for(const n of t.getTracks())null!=r||await n.applyConstraints({advanced:[{torch:!1}]}),t.removeTrack(n),n.stop();return{type:"stop",data:{}}}async function ze(){if(Ne=Ne.then((e=>{if("stop"===e.type||"failed"===e.type)return e;const{data:{videoEl:t,stream:r,isTorchOn:n}}=e;return Ve(t,r,n)})),"start"===(await Ne).type)throw new Error("Something went wrong with the camera task queue (stop task).")}const qe=e({__name:"QrcodeStream",props:{constraints:{default:()=>({facingMode:"environment"})},formats:{default:()=>["qr_code"]},paused:{type:Boolean,default:!1},torch:{type:Boolean,default:!1},track:{type:Function,default:void 0}},emits:["detect","camera-on","camera-off","error"],setup(e,{emit:p}){const h=e,v=p,m=t(h.constraints),y=t(h.formats);r((()=>h.constraints),((e,t)=>{JSON.stringify(e)!==JSON.stringify(t)&&(m.value=e)}),{deep:!0}),r((()=>h.formats),((e,t)=>{JSON.stringify(e)!==JSON.stringify(t)&&(y.value=e)}),{deep:!0});const g=t(),w=t(),b=t(),C=t(!1),$=t(!1);n((()=>{$.value=!0})),o((()=>{ze()}));const T=a((()=>({torch:h.torch,constraints:m.value,shouldStream:$.value&&!h.paused})));r(T,(async e=>{const t=b.value;de(void 0!==t,"cameraSettings watcher should never be triggered when component is not mounted. Thus video element should always be defined.");const r=g.value;de(void 0!==r,"cameraSettings watcher should never be triggered when component is not mounted. Thus canvas should always be defined.");const n=r.getContext("2d");if(de(null!==n,"if cavnas is defined, canvas 2d context should also be non-null"),e.shouldStream){ze(),C.value=!1;try{const r=await async function(e,{constraints:t,torch:r,restart:n=!1}){Ne=Ne.then((o=>{if("start"===o.type){const{data:{videoEl:a,stream:i,constraints:s,isTorchOn:c}}=o;return n||e!==a||t!==s||r!==c?Ve(a,i,c).then((()=>Be(e,t,r))):o}if("stop"===o.type||"failed"===o.type)return Be(e,t,r);fe()})).catch((e=>(console.debug(`[vue-qrcode-reader] starting camera failed with "${e}"`),{type:"failed",error:e})));const o=await Ne;if("stop"===o.type)throw new Error("Something went wrong with the camera task queue (start task).");if("failed"===o.type)throw o.error;if("start"===o.type)return o.data.capabilities;fe()}(t,e);$.value?(C.value=!0,v("camera-on",r)):await ze()}catch(o){v("error",o)}}else r.width=t.videoWidth,r.height=t.videoHeight,n.drawImage(t,0,0,t.videoWidth,t.videoHeight),ze(),C.value=!1,v("camera-off")}),{deep:!0}),r(y,(async e=>{$.value&&await ve(e)}));const S=a((()=>T.value.shouldStream&&C.value));r(S,(e=>{if(e){de(void 0!==g.value,"shouldScan watcher should only be triggered when component is mounted. Thus pause frame canvas is defined"),_(g.value),de(void 0!==w.value,"shouldScan watcher should only be triggered when component is mounted. Thus tracking canvas is defined"),_(w.value);const e=()=>void 0===h.track?500:40;de(void 0!==b.value,"shouldScan watcher should only be triggered when component is mounted. Thus video element is defined"),(async(e,{detectHandler:t,locateHandler:r,minDelay:n,formats:o})=>{console.debug("[vue-qrcode-reader] start scanning"),await ve(o);const a=o=>async i=>{if(0===e.readyState)console.debug("[vue-qrcode-reader] stop scanning: video element readyState is 0");else{const{lastScanned:s,contentBefore:c,lastScanHadContent:u}=o;if(i-s<n)window.requestAnimationFrame(a(o));else{const n=await pe.detect(e),o=n.some((e=>!c.includes(e.rawValue)));o&&t(n);const s=n.length>0;s&&r(n),!s&&u&&r(n);const l={lastScanned:i,lastScanHadContent:s,contentBefore:o?n.map((e=>e.rawValue)):c};window.requestAnimationFrame(a(l))}}};a({lastScanned:performance.now(),contentBefore:[],lastScanHadContent:!1})(performance.now())})(b.value,{detectHandler:e=>v("detect",e),formats:y.value,locateHandler:P,minDelay:e()})}}));const _=e=>{const t=e.getContext("2d");de(null!==t,"canvas 2d context should always be non-null"),t.clearRect(0,0,e.width,e.height)},P=e=>{const t=w.value;de(void 0!==t,"onLocate handler should only be called when component is mounted. Thus tracking canvas is always defined.");const r=b.value;if(de(void 0!==r,"onLocate handler should only be called when component is mounted. Thus video element is always defined."),0===e.length||void 0===h.track)_(t);else{const n=r.offsetWidth,o=r.offsetHeight,a=r.videoWidth,i=r.videoHeight,s=Math.max(n/a,o/i),c=a*s,u=i*s,l=c/a,d=u/i,f=(n-c)/2,p=(o-u)/2,v=({x:e,y:t})=>({x:Math.floor(e*l),y:Math.floor(t*d)}),m=({x:e,y:t})=>({x:Math.floor(e+f),y:Math.floor(t+p)}),y=e.map((e=>{const{boundingBox:t,cornerPoints:r}=e,{x:n,y:o}=m(v({x:t.x,y:t.y})),{x:a,y:i}=v({x:t.width,y:t.height});return{...e,cornerPoints:r.map((e=>m(v(e)))),boundingBox:DOMRectReadOnly.fromRect({x:n,y:o,width:a,height:i})}}));t.width=r.offsetWidth,t.height=r.offsetHeight;const g=t.getContext("2d");de(null!==g,"canvas 2d context should always be non-null"),h.track(y,g)}},E={width:"100%",height:"100%",position:"relative","z-index":"0"},O={width:"100%",height:"100%",position:"absolute",top:"0",left:"0"},x={width:"100%",height:"100%","object-fit":"cover"},M=a((()=>S.value?x:{...x,visibility:"hidden",position:"absolute"}));return(e,t)=>(f(),i("div",{style:E},[s("video",{ref_key:"videoRef",ref:b,style:u(M.value),autoplay:"",muted:"",playsinline:""},null,4),c(s("canvas",{id:"qrcode-stream-pause-frame",ref_key:"pauseFrameRef",ref:g,style:x},null,512),[[l,!S.value]]),s("canvas",{id:"qrcode-stream-tracking-layer",ref_key:"trackingLayerRef",ref:w,style:O},null,512),s("div",{style:O},[d(e.$slots,"default")])]))}}),Ge={class:"container-fluid",style:{margin:"0",padding:"0"}},Je={class:"d-flex flex-wrap justify-content-center gap-2 w-100",style:{padding:"1em"}},Ye={class:"card card-fixed-wd"},Qe={class:"card-img-top"},Xe={class:"card-body"},Ke={class:"card-title"},Ze={key:0},et={key:1},tt={class:"card-footer d-flex flex-wrap justify-content-center gap-2"},rt={__name:"ScanCode",setup(e){const r=b();p();const o=t(null),a=t(null),c=t(!1),u=t("environment");function l(e,t){for(const r of e){const{boundingBox:{x:e,y:n,width:o,height:a}}=r;t.lineWidth=2,t.strokeStyle="#DC143C",t.strokeRect(e,n,o,a)}}function d(e){a.value=`[${e.name}]: `,"NotAllowedError"===e.name?a.value+="you need to grant camera access permission":"NotFoundError"===e.name?a.value+="no camera on this device":"NotSupportedError"===e.name?a.value+="secure context required (HTTPS, localhost)":"NotReadableError"===e.name?a.value+="is the camera already in use?":"OverconstrainedError"===e.name?a.value+="installed cameras are not suitable":"StreamApiNotSupportedError"===e.name?a.value+="Stream API is not supported in this browser":"InsecureContextError"===e.name?a.value+="Camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP.":a.value+=e.message}function C([e]){o.value=e.rawValue,c.value=!0,window.Swal.fire({icon:"success",title:"掃瞄結果",text:`${o.value}`,showDenyButton:!0,confirmButtonText:"再掃瞄",denyButtonText:"關閉"}).then((e=>{e.isConfirmed?c.value=!1:e.isDenied&&(c.value=!0)}))}return n((async()=>{})),(e,t)=>(f(),i("div",Ge,[s("div",Je,[s("div",Ye,[s("div",Qe,[h(v(qe),{track:l,constraints:{facingMode:u.value},paused:c.value,onDetect:C,onError:d},null,8,["constraints","paused"])]),s("div",Xe,[s("h3",Ke,[t[3]||(t[3]=s("p",null,"QR Code 掃描器",-1)),a.value?(f(),i("p",Ze,y(a.value),1)):m("",!0),o.value?(f(),i("p",et,"掃描結果: "+y(o.value),1)):m("",!0)])]),s("div",tt,[s("button",{type:"button",class:"btn btn-outline-primary fixed-size me-2",onClick:t[0]||(t[0]=e=>{c.value=!1})},"掃瞄"),s("button",{type:"button",class:"btn btn-outline-primary fixed-size me-2",onClick:t[1]||(t[1]=e=>function(){switch(u.value){case"environment":u.value="user";break;case"user":u.value="environment"}g(`鏡頭切換至: ${u.value}`,{autoClose:2e3})}())},"切換鏡頭"),s("button",{type:"button",class:"btn btn-outline-primary fixed-size me-2",onClick:t[2]||(t[2]=e=>{w((()=>{r.push({name:"Home"})}))})},"回首頁")])])])]))}};export{rt as default};
