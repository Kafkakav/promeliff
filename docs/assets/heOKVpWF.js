import{_ as t}from"./BIwg1ykr.js";import{u as e,o as n,l as s,d as i,f as o,s as a,i as c,a as r,v as u,c as l,j as d}from"./BmJwC-OX.js";const p={class:"container-fluid px-4 text-center"},f={class:"d-flex flex-wrap justify-content-center gap-2",style:{margin:"20px",padding:"auto"}},m={__name:"home",setup(m){const b=r(),g=e(),C=t=>{"CheckIn"==t?b.push({name:"CheckIn"}):"ScanCode"==t?b.push({name:"ScanCode"}):"GetQNumber"==t?b.push({name:"GetQNumber"}):"CurrencyExchange"==t?window.Swal.fire({icon:"warning",title:"提示",html:"<p>施工中...</p>"}):"SendMesg"==t?s.isInClient()&&s.isLoggedIn()?window.Swal.fire({title:"請輸入訊息內容",input:"text",inputPlaceholder:"輸入要發送訊息...",showCancelButton:!0,confirmButtonText:"確定",cancelButtonText:"取消"}).then((t=>{if(t.isConfirmed){const e=t.value.substring(0,16);if(!e||0==e.length)return void l("無訊息發送",{autoClose:3e3});s.sendMessages([{type:"text",text:`${e}`}]).then((function(t){l(`發送成功: ${e}`,{autoClose:3e3})})).catch((function(t){l(`發送失敗: ${t.message||t.code}`,{autoClose:3e3})}))}else t.isDismissed&&l("取消發送",{autoClose:2e3})})):window.Swal.fire({icon:"error",title:"此功能僅適用於己登入LINE App時",showCancelButton:!1,confirmButtonText:"確定"}):"ReLogin"==t&&(u(),b.push({path:"/"}))};return n((async()=>{s.isLoggedIn()&&async function(){let t="https://script.google.com/macros/s/";try{const e=s.getDecodedIDToken();if(!e||!e.sub)return void a("gasDIT",{dit:"nosub"});const n=c("gasDIT"),i=`${e.sub}@${g.liffId}`;if(n&&n.dit===i)return;let o="type="+(s.isInClient()?"app":"ext");o+=`&id=${encodeURIComponent(g.liffId)}`,o+=`&dit=${encodeURIComponent(JSON.stringify(e))}`,t+="AKfycbzxE5zUC5ShG-Mt6R0ywst76vl_MGWmfmYowr91Rtd8ZUL1k_4wonbuhDui4yAu-irC2w";const r=await fetch(t+"/exec?"+o);"success"===(await r.json()).status?a("gasDIT",{dit:i}):a("gasDIT",{dit:"failed"})}catch(e){a("gasDIT",{dit:"error",err:e.message||e.code})}}()})),(e,n)=>(d(),i("div",p,[n[6]||(n[6]=o("img",{src:t,class:"card-img-top",style:{"max-width":"440px"},alt:"PROME Title"},null,-1)),o("div",f,[o("button",{type:"button",class:"btn btn-outline-primary fixed-size",onClick:n[0]||(n[0]=t=>C("CheckIn"))},"打卡"),o("button",{type:"button",class:"btn btn-outline-primary fixed-size",onClick:n[1]||(n[1]=t=>C("ScanCode"))},"掃碼"),o("button",{type:"button",class:"btn btn-outline-primary fixed-size",onClick:n[2]||(n[2]=t=>C("GetQNumber"))},"抽號碼"),o("button",{type:"button",class:"btn btn-outline-primary fixed-size",onClick:n[3]||(n[3]=t=>C("CurrencyExchange"))},"匯率"),o("button",{type:"button",class:"btn btn-outline-primary fixed-size",onClick:n[4]||(n[4]=t=>C("SendMesg"))},"留言"),o("button",{type:"button",class:"btn btn-outline-primary fixed-size wrap-text",onClick:n[5]||(n[5]=t=>C("ReLogin"))},"重新登入")])]))}};export{m as default};
